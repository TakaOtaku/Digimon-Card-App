<div class="h-[calc(100vh-50px)] w-full overflow-y-scroll">
  <div class="mx-auto flex max-w-7xl flex-col">
    <div class="mb-5 w-full border-2 border-slate-500 p-1">
      <div class="flex flex-row">
        <h1 class="mb-2 w-full text-3xl font-extrabold text-white">
          Digimon Forum
        </h1>
        <button
          *ngIf="showWrite()"
          class="p-button-outlined p-button-rounded ml-auto mr-2"
          icon="pi pi-plus"
          pButton
          pRipple
          type="button"
          (click)="newEntry()"
        ></button>
      </div>

      <div class="overflow-x-auto">
        <div class="inline-block h-64 min-w-full overflow-auto py-2">
          <table class="min-w-full">
            <thead class="surface-card border-b">
              <tr>
                <th
                  scope="col"
                  class="px-6 py-2 text-left text-sm font-medium text-white"
                >
                  Title
                </th>
                <th
                  scope="col"
                  class="px-6 py-2 text-left text-sm font-medium text-white"
                >
                  Author
                </th>
                <th
                  scope="col"
                  class="px-6 py-2 text-left text-sm font-medium text-white"
                >
                  Date
                </th>
                <th
                  *ngIf="showButtons()"
                  scope="col"
                  class="px-6 py-2 text-left text-sm font-medium text-white"
                ></th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngIf="showWrite()">
                <tr
                  *ngFor="let blog of blogEntriesHidden"
                  class="border-b transition duration-300 ease-in-out hover:hover:backdrop-brightness-150"
                >
                  <td
                    class="cursor-pointer whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                    (click)="open(blog)"
                  >
                    <h2>{{ blog.title }}</h2>
                  </td>
                  <td
                    class="whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                  >
                    {{ blog.author }}
                  </td>
                  <td
                    class="whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                  >
                    {{ blog.date | date: "dd.MM.yyyy" }}
                  </td>
                  <td
                    *ngIf="showButtons()"
                    class="whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                  >
                    <button
                      *ngIf="showButtons()"
                      [disabled]="!isAdmin()"
                      class="p-button p-button-rounded ml-auto mr-2"
                      icon="pi pi-times"
                      pButton
                      pRipple
                      type="button"
                      (click)="approve(blog)"
                    ></button>
                    <button
                      *ngIf="showEdit(blog)"
                      class="p-button p-button-rounded ml-auto mr-2"
                      icon="pi pi-pencil"
                      pButton
                      pRipple
                      type="button"
                      (click)="edit(blog)"
                    ></button>
                    <button
                      *ngIf="isAdmin()"
                      class="p-button p-button-rounded ml-auto mr-2"
                      icon="pi pi-trash"
                      pButton
                      pRipple
                      type="button"
                      (click)="delete(blog, $event)"
                    ></button>
                  </td>
                </tr>
              </ng-container>
              <tr
                *ngFor="let blog of blogEntries"
                class="border-b transition duration-300 ease-in-out hover:hover:backdrop-brightness-150"
              >
                <td
                  class="cursor-pointer whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                  (click)="open(blog)"
                >
                  {{ blog.title }}
                </td>
                <td
                  class="whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                >
                  {{ blog.author }}
                </td>
                <td
                  class="whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                >
                  {{ blog.date | date: "dd.MM.yyyy" }}
                </td>
                <td
                  *ngIf="showButtons()"
                  class="whitespace-nowrap px-6 py-2 text-sm font-light text-white"
                >
                  <button
                    *ngIf="showButtons()"
                    [disabled]="!isAdmin()"
                    class="p-button p-button-rounded ml-auto mr-2"
                    icon="pi pi-check"
                    pButton
                    pRipple
                    type="button"
                    (click)="hide(blog)"
                  ></button>
                  <button
                    *ngIf="showEdit(blog)"
                    class="p-button p-button-rounded ml-auto mr-2"
                    icon="pi pi-pencil"
                    pButton
                    pRipple
                    type="button"
                    (click)="edit(blog)"
                  ></button>
                  <button
                    *ngIf="isAdmin()"
                    class="p-button p-button-rounded ml-auto mr-2"
                    icon="pi pi-trash"
                    pButton
                    pRipple
                    type="button"
                    (click)="delete(blog, $event)"
                  ></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <digimon-deck-statistics></digimon-deck-statistics>

    <digimon-tierlist></digimon-tierlist>
  </div>
  <div class="h-24 w-full lg:hidden"></div>
</div>

<p-dialog
  (close)="editView = !editView"
  [(visible)]="editView"
  [closable]="true"
  [closeOnEscape]="true"
  [modal]="true"
  class="min-h-[95vw] min-w-[95vw]"
  header="Edit Blog-Entry"
>
  <span class="mt-2 w-1/2">
    <input
      [(ngModel)]="currentTitle"
      placeholder="Title:"
      class="mb-3 h-8 w-full text-sm"
      pInputText
      type="text"
    />
  </span>
  <quill-editor [(ngModel)]="currentQuill" format="object"> </quill-editor>
  <button
    class="p-button mt-3"
    icon="pi pi-save"
    pButton
    pRipple
    type="button"
    label="Save"
    (click)="save()"
  ></button>
</p-dialog>
